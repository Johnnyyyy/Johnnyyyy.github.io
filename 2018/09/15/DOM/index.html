<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>DOM | John康的部落格</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">DOM</h1><a id="logo" href="/.">John康的部落格</a><p class="description">自己学习的一些心得笔记</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">DOM</h1><div class="post-meta">Sep 15, 2018</div><div class="post-content"><p>DOM  (document object model)</p>
<p>DOM接口<br>各个标签的构造函数<br>document代表整个文档<br>getElementsByTagNanme()//动态获取<br>getElementById()<br>getElementsByClassNamw()//form iframe img input才可以用<br>getElementsByName()//通过name属性查找元素</p>
<p>css选择器//按层次获取精确，但不是动态的当时有多少获取多少<br>querySelector(‘div ul .demo .a’)获取一个<br>querySelectorAll(‘div ul .demo .a’)获取一组<br>不同父级的同名子级标签<br>elements返回的都是数组<br>用document.getElementsByClassName(‘ ‘)[0]</p>
<p>var oDiv=document.getElementsByTagName(‘div’)[0]<br>var oSpan=createElement(‘span’)<br>oDiv = appendChild(oSpan)<br>removeChild返回删除的dom标签</p>
<p>遍历节点树<br>parentNode  -&gt;父节点（最顶端为#document）<br>childNodes  -&gt;子节点们<br>firstChild  -&gt;第一个子节点<br>lastChild -&gt;最后一个子节点<br>nextSibling  -&gt;后一个兄弟节点<br>nextElementSibling<br>previousSibling  -&gt;前一个兄弟节点<br>基于元素节点树的遍历<br>parentElement -&gt;返回当前检点的父节点<br>children  -&gt;只返回当前元素的元素子节点<br>node.childElementCount   === node.children.length当前元素的子节点个数</p>
<p>节点的类型<br>元素节点 ——1<br>属性节点——2   getAttributeNode()<br>文本节点——-3<br>注释节点——-8<br>document——9<br>documentFragment—11<br>获取节点类型 nodeType</p>
<p>//html<br>//标签元素<br>//js -&gt;html<br>//节点 === 对象  -&gt;元素节点 文本节点 注视节点 属性节点</p>
<p>document&lt;—HTMLDocument&lt;—-Node&lt;—EventTarget&lt;—Object</p>
<p>dom接口</p>
<pre><code>                                                                    ____HTMLheadElement
                                                                    |
___Document——HTMLDocument            |—-HTMLheadElement
|                              __Text                           |
|__CharacterData-|__Comment                 |—-HTMLTitleElement
|                                                                   |
</code></pre><p>Node-|<strong>Element_____</strong>HTMLElement———— |—-HTMLParagraphElement<br>          |                                                                   |<br>          |                                                                   |—HTMLInputElement<br>          |—-Attr(  oDiv.getAttributeNode(‘id’) )     |<br>                                                                              |—HTMLTableElement<br>                                                                                ….<br>例子：<br>Element.prototype.ancester=function(n){<br>         if(n &gt; 0 ){<br>             var pN=this.parentNode;<br>            while(n– &gt; 0&amp;&amp; pN){<br>                 pN=pN.parentNode;<br>             }}<br>             return pN;<br>      }<br>    Element.prototype.hasChildren=function(){<br>        for(var i = 0;i&lt; this.childNodes.length;i++){<br>            if(this.childNodes[i].noeType==1){<br>                   return true;<br>            }else{<br>                return false;<br>            }<br>        }<br>    }<br>    Element.prototype.retSibling=function(n){<br>        if(n&gt;0){<br>             var sib=this.nextElementSibling;<br>             while(n– &gt;0){<br>                 sib=sib.nextElementSibling;<br>             }<br>             return sib;<br>        }else if(n&lt;0){<br>            var sib=this.previousElementSibling;<br>             while(n– &gt;0){<br>                 sib=sib.previousElementSibling;<br>             }<br>             return sib;<br>        }else{<br>            return dom;<br>        }<br>    }<br>Element.prototype.insertAfter=function(newd,oldd){<br>         if(oldd.nextElementSibling)<br>        this.insertBefore(newd,oldd.nextElementSibling)<br>        else{<br>            this.appendChild(newd);<br>        }<br>     }<br>     wrapper.insertAfter(osp, op);<br>.innerHTML=‘<i>aa</i>’<br>.innerText(火狐不兼容）<br>.setAttribute(‘class’,’name’) (设置属性）<br>.getAttribute(‘ class’);<br>.inserBefore(    ,       )<br>日期对象<br>var odate=new Date()<br>date.getDate()<br>date.getDay()<br>date.getMonth()<br>date.getFullYear()<br>date.getHours()<br>date.getMinutes()<br>date.getSeconds()<br>date.getMilliseconds()<br>date.getTime()<br>设置时间get改成set<br>cookie设置保质期<br>document.cookie=“name=’zyk’,expires=“+=date<br>定时器<br>setTimeout<br>setInterval<br>dom/bom基本操作<br>查看滚动条的滚动距离<br>window.pageXOffset/pageYOffset<br>IE6及IE8以下不兼容<br>查看视口 的尺寸<br>  window.innerWidth/innerHeight（加上滚动条额度宽高）<br>document.documentElement.clientWidth/clientHeight（标准模式下任意浏览器都兼容<br>document.body.clientWidth/clientHeight（适用于怪异模式下的浏览器<br>document.compatMode BackMode怪异css1mode标准<br>兼容性：<br>document.compatMode=’BackMode’/‘css1Mode’<br>        Document.prototype.getClientSize = function(direction){<br>                     if(document.compatMode===’BackMode’){<br>                         return direction === ‘width’ ?document.body.clientWidth:document.body.clientHeight;<br>                     }else{<br>                         return direction === ‘width’ ?document.documentElement.clientWidth:document.documentElement.clientHeight;<br>                     }<br>        }<br>防止循环添加元素出现的死循环<br>getBoundingClientRect()获取元素相对视窗的位置集合<br>查看元素尺寸<br>.offsetWidth<br>.offsetHeight<br>查看元素的位置,对于无定位父级的元素，返回可是部分的边界，相对文档的坐标，对于有定位父级的元素，返回相对于最近的有定位父级的坐标<br>.offsetLeft     (有margin要加上)<br>.offsetTop<br>返回最近的有定位的父级，若无返回body，body.offsetParent返回null<br>window.scrollTo(  ,   )scroll( , )         ,scrollBy()会做累加<br>脚本化css<br>读写元素css属性<br>dom.style.prop 只看行间样式offsetWidth更精确<br>float要写成style.cssFloat<br>className因为es6里class是保留字<br>window.getComputedStyle(election,null)查询计算样式，返回都是绝对值，没有相对单位,Ie8以下不兼容<br>window.getComputedStyle(oDiv,null)[‘marginLeft’]获取oDiv中的margin-left属性<br>styleSheets[0].disabled=true即可废掉style里写的样式<br>事件Event<br>交互体验的核心功能<br>事件处理函数<br>（weex  hbrid app）混合app<br>如果只用onclick会覆盖之前的<br>addEventListener<br>（订阅模式）<br>ele.onXXX=function(event){}<br>.兼容性很好<br>.基本等于写在html行间上<br>2.ele.addEventListener(type, fn,false)ie9以下不兼容，可以作为一个事件绑定多个处理程序<br>type包括click，mouseOn，mouseDown；false事件冒泡true事件捕获<br>3.ele.attachEvent(‘on’+type,fn);<br>IE独有，一个事件同样可以绑定多个处理程序<br>解除事件绑定<br>removeEventListener(‘click’,functionName)<br>detachEvent(‘on’+type,function)<br>解决兼容性的一个添加事件的写法<br>function addEvent(dom,type,handle){<br>            if(dom.addEventListener){<br>                var temp=function(){<br>                    handle.call(dom);<br>                }<br>                if(!handle.funcArr){<br>                    handle.funcArr=[temp];<br>                }else{<br>                    handle.funcArr.push(temp);<br>                }<br>                dom.addEventListener(type,temp,false)<br>            }else if(dom.attachEvent){<br>                var temp=function(){<br>                    handle.call(dom);<br>                }<br>                if(!handle.funcArr){<br>                    handle.funcArr=[temp];<br>                }else{<br>                    handle.funcArr.push(temp);<br>                }<br>                dom.attachEvent(‘on’+type,temp);<br>            }else{<br>                dom[‘on’+type]=handle;<br>            }<br>        }<br>        function removeEvent(dom,type,handle){<br>            if(dom.addEventListener){<br>                dom.removeEventListener(type,handle.funcArr.pop());<br>            }else if(dom.attachEvent){<br>                dom.detachEvent(‘on’+type,handle.funcArr.pop());//删除哪一个引用都一样，因为是同一个函数的引用<br>            }else{<br>                dom[‘on’+type]=null;<br>            }<br>        }<br>事件处理模型——事件冒泡捕获<br>1.事件冒泡：结构上（非视觉上）嵌套关系的元素，会存在事件冒泡的功能，即同一事件子元素猫跑到父级元素<br>2.事件捕获：结构上（非视觉上）嵌套关系的元素，会存在事件捕获的功能，即同一事件自父级元素捕获到子元素<br>触发顺序，先捕获后冒泡<br>focus，blur，change，submit，reset，select等事件不冒泡<br>取消冒泡事件<br>event.stopPropagation()<br>event.cancleBuble=true<br>阻止默认事件<br>默认事件——表单提交，a标签跳转，右键菜单<br>鼠标事件：click，mousedown，mousemove，mouseup，contexrmenu，mouseover，mouseout，mouseenter，mouseleave<br>鼠标按键0，1，2<br>事件对象：event||window.event用于ie<br>事件源对象：event.target火狐event.srcElementi ie独有这俩chrome 都有<br>事件的发生的事情源头<br>如何解决mousedown和click的矛盾<br>//window.location.herf=‘’;跳转<br>var downTime=0,upTime=0;<br>        var timer=null;<br>        click.onmousedown = function(e){<br>            downTime=e.timeStamp;<br>            console.log(‘down’);<br>            var that=this;<br>            timer=setTimeout(function(){<br>            enlarge(that);<br>            },500)<br>            return false;<br>        }<br>        click.onmouseup = function(e){<br>            upTime=e.timeStamp;<br>            console.log(‘up’);<br>            if(upTime-downTime&lt;300){<br>                clearTimeout(timer);<br>                console.log(‘click’);<br>            }else{<br>                shrink(this);<br>            }<br>            return false;<br>        }<br>        click.onclick=function(e){<br>        }<br>拖拽功能<br>click.onmousedown=function(event){<br>            console.log(‘down’);<br>            var event= event||window.event;<br>            var _self=this;<br>            var disX=event.clientX-this.offsetLeft;<br>            var disY=event.clientY-this.offsetTop;<br>            document.onmousemove = function(event){<br>                console.log(‘move’);<br>                var event= event||window.event;<br>                _self.style.left=event.clientX-disX+’px’;<br>                _self.style.top=event.clientY-disY+’px’;<br>            }<br>            document.onmouseup=function(){<br>                document.onmousemove=null;<br>            }<br>        }<br>//能检测所有键盘上的按键<br>        document.onkeydown=function(e){<br>            console.log(‘down’,e);<br>        }<br>        //能检测所有键盘上的字符按键<br>        document.onkeypress=function(e){<br>            console.log(‘press’,e);<br>        }<br>e.which表示哪个键<br>组件网站 <a href="http://element-cn.eleme.io/#/zh-CN/component/layout" target="_blank" rel="noopener">http://element-cn.eleme.io/#/zh-CN/component/layout</a><br>window.onload网页加载完执行</p>
</div><div class="tags"></div><div class="post-nav"><a class="next" href="/2018/09/09/promise/">promise</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/15/DOM/">DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/promise/">promise</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/es6/">es6</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/网络/">网络</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/性能优化/">性能优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/JS笔记二/">JS笔记二</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/06/JS笔记/">JS笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/05/正则表达式/">正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/05/JS基础/">css基础</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="https://www.nowcoder.com/" title="牛客网" target="_blank">牛客网</a><ul></ul><a href="https://juejin.im/" title="掘金网" target="_blank">掘金网</a><ul></ul><a href="https://www.csdn.net/" title="csdn" target="_blank">csdn</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">John康的部落格.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" color="0,0,0" opacity="0.5" zIndex="-2" count="50" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>